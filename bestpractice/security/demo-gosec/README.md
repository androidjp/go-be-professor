# gosec 的 demo

## github地址

https://github.com/securego/gosec

## 使用流程

### 1. 切换go 版本至 1.19或者以上
```shell
goup install 1.20.5
```

### 2. 安装至$GOPATH/bin目录下
```shell
go install github.com/securego/gosec/v2/cmd/gosec@latest
```
然后，可以查看我们的$GOPATH/bin目录下是否存在gosec 的可执行文件：
```shell
ls $GOPATH/bin
```
再看看我们执行指令看看是否生效了：
```shell
gosec --help
```


## demo 跑通
常用的指令包括：
```shell
# 默认就是全部rule都会执行检测
$ gosec ./...

# Run a specific set of rules
$ gosec -include=G101,G203,G401 ./...

# Run everything except for rule G303
$ gosec -exclude=G303 ./...


# 包括test文件的执行
gosec -tests ./...

# 排除某些目录后的执行
gosec -exclude-dir=rules -exclude-dir=cmd ./...

# 排除 自动生成的文件，比如带有以下标识的文件
# // Code generated by some generator DO NOT EDIT.
gosec -exclude-generated ./...

```

## 对于某些import的库或者某个代码块进行忽略，可以这样
```go
import "md5" //#nosec

func main(){

    /* #nosec */
    if x > y {
        h := md5.New() // this will also be ignored
    }

}
```
写法可以是：`/* #nosec G401 */` or `//#nosec G201 G202 G203`

可以补充说明注释为什么要忽略，如：`//#nosec G101 G102 -- This is a false positive`


一些情况下，我们想要跑一下这些被nosec注释的地方，可以这样重新放开：
```shell
gosec -nosec=true ./...
```

等等，请看 github 官方使用文档。

